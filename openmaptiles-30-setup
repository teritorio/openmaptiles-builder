wget -P pbf \
    http://download.geofabrik.de/europe/spain-latest.osm.pbf \
    http://download.geofabrik.de/africa/canary-islands-latest.osm.pbf \
    http://download.geofabrik.de/europe/andorra-latest.osm.pbf \
    http://download.geofabrik.de/europe/guernsey-jersey-latest.osm.pbf \
    http://download.geofabrik.de/europe/luxembourg-latest.osm.pbf \
    http://download.geofabrik.de/europe/belgium-latest.osm.pbf \
    http://download.geofabrik.de/europe/france-latest.osm.pbf \
    http://download.geofabrik.de/africa/morocco-latest.osm.pbf \
    http://download.geofabrik.de/africa/madagascar-latest.osm.pbf \
    http://download.openstreetmap.fr/extracts/north-america/saint_pierre_et_miquelon-latest.osm.pbf \
    http://download.openstreetmap.fr/extracts/central-america/martinique-latest.osm.pbf \
    http://download.openstreetmap.fr/extracts/central-america/guadeloupe-latest.osm.pbf \
    http://download.openstreetmap.fr/extracts/south-america/guyane-latest.osm.pbf \
    http://download.openstreetmap.fr/extracts/africa/reunion-latest.osm.pbf \
    http://download.openstreetmap.fr/extracts/africa/mayotte-latest.osm.pbf \
    http://download.openstreetmap.fr/extracts/oceania/polynesie-latest.osm.pbf

cd pbf


osmium cat -O -o france-latest_.osm.pbf --output-header=osmosis_replication_base_url=http://download.geofabrik.de/europe/france-updates/ france-latest.osm.pbf
mv france-latest_.osm.pbf france-latest.osm.pbf

osmium cat -O -o andorra-latest_.osm.pbf --output-header=osmosis_replication_base_url=http://download.geofabrik.de/europe/andorra-updates/ andorra-latest.osm.pbf
mv andorra-latest_.osm.pbf andorra-latest.osm.pbf

osmium cat -O -o guernsey-jersey-latest_.osm.pbf --output-header=osmosis_replication_base_url=http://download.geofabrik.de/europe/guernsey-jersey-updates/ guernsey-jersey-latest.osm.pbf
mv guernsey-jersey-latest_.osm.pbf guernsey-jersey-latest.osm.pbf

osmium cat -O -o luxembourg-latest_.osm.pbf --output-header=osmosis_replication_base_url=http://download.geofabrik.de/europe/luxembourg-updates/ luxembourg-latest.osm.pbf
mv luxembourg-latest_.osm.pbf luxembourg-latest.osm.pbf

osmium cat -O -o belgium-latest_.osm.pbf --output-header=osmosis_replication_base_url=http://download.geofabrik.de/europe/belgium-updates/ belgium-latest.osm.pbf
mv belgium-latest_.osm.pbf belgium-latest.osm.pbf

osmium cat -O -o spain-latest_.osm.pbf --output-header=osmosis_replication_base_url=http://download.geofabrik.de/europe/spain-updates/ spain-latest.osm.pbf
mv spain-latest_.osm.pbf spain-latest.osm.pbf

osmium cat -O -o canary-islands-latest_.osm.pbf --output-header=osmosis_replication_base_url=http://download.geofabrik.de/africa/canary-islands-updates/ canary-islands-latest.osm.pbf
mv canary-islands-latest_.osm.pbf canary-islands-latest.osm.pbf

osmium cat -O -o morocco-latest_.osm.pbf --output-header=osmosis_replication_base_url=http://download.geofabrik.de/africa/morocco-updates/ morocco-latest.osm.pbf
mv morocco-latest_.osm.pbf morocco-latest.osm.pbf

osmium cat -O -o madagascar-latest_.osm.pbf --output-header=osmosis_replication_base_url=http://download.geofabrik.de/africa/madagascar-updates/ madagascar-latest.osm.pbf
mv madagascar-latest_.osm.pbf madagascar-latest.osm.pbf

cd ..


# Merge .poly
for id in 1403916 1311341 9407 1124039 52411 2171347 270009 367988 3630439; do
    curl "http://polygons.openstreetmap.fr/?id=${id}" -X POST -H 'Content-Type: application/x-www-form-urlencoded' --data-raw 'x=0.040000&y=0.010000&z=0.010000'
done
curl "http://polygons.openstreetmap.fr/get_poly.py?params=0.040000-0.010000-0.010000&id=1403916,1311341,9407,1124039,52411,2171347,270009,367988,3630439" > bbox/merge.poly
# http://polygons.openstreetmap.fr/get_image.py?params=0.040000-0.010000-0.010000&id=1403916,1311341,9407,1124039,52411,2171347,270009,367988,3630439


wget -P bbox \
    http://download.geofabrik.de/africa/madagascar.poly \
    http://download.openstreetmap.fr/polygons/north-america/saint_pierre_et_miquelon.poly \
    http://download.openstreetmap.fr/polygons/central-america/martinique.poly \
    http://download.openstreetmap.fr/polygons/central-america/guadeloupe.poly \
    http://download.openstreetmap.fr/polygons/south-america/guyane.poly \
    http://download.openstreetmap.fr/polygons/africa/reunion.poly \
    http://download.openstreetmap.fr/polygons/africa/mayotte.poly \
    http://download.openstreetmap.fr/polygons/oceania/polynesie.poly

sed -i "s/\t/ /g" bbox/*.poly
